<!DOCTYPE html>
<html>
<head>
    <title>Author a Story with N3</title>
    <link rel="stylesheet" href="css/jquery-ui.css" type="text/css" />
    <link rel="stylesheet" href="css/colorpicker.css" type="text/css" />
    <link rel="stylesheet" href="css/n3-ui.css" type="text/css" />
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/colorpicker.js"></script>
    <script type="text/javascript" src="js/d3.min.js"></script>
    <script type="text/javascript" src="js/n3.js"></script>
    <script type="text/javascript" src="js/n3-ui.js"></script>
</head>
<body>
    <div id="n3-ui_visDialog" title="Visualizations">
    	<p>To begin, please paste your javascript <code>n3.vis</code> wrappers in the textbox below. Feel free to enter multiple visualizations at once.</p>
    	<p><textarea name="vis" id="vis">
    	    var data = {
                thirteen:  d3.range(17, 88, 13),
                seventeen: d3.range(13, 88, 17),
                nineteen:  d3.range(11, 88, 19)
            };
            var width = 700
            var height = 400

            var vis = n3.vis('simpleTest1')
                            .stage('#stage', width, height)
                            .data(data)
                            .state('numberRange', ['thirteen', 'seventeen', 'nineteen'])
                            .const('sx', function() {
                                return d3.scale.linear()
                                                .domain([0, vis.data()[vis.state('numberRange')].length])
                                                .range([0, vis.width()])
                            })
                            .const('sy', function() {
                                return d3.scale.linear()
                                                .domain([0, 88])
                                                .range([0, vis.height()])
                            })
                            .render(renderVis)

            function renderVis() {
                var svg = this.stage()

                var selBar = svg.selectAll('rect.vis')
                                    .data(this.data()[this.state('numberRange')])

                selBar.enter().append('svg:rect')
                        .attr('x', function(d, i) { return vis.const('sx')()(i) })
                        .attr('y', this.height())
                        .attr('class', 'vis')
                        .attr('width', 80)
                        .attr('height', this.const('sy')())
                        .style('fill', 'steelblue')

                selBar.transition()
                        .duration(1000)
                        .delay(function(d, i) { return i * 125 })
                        .attr('y', function(d) { return vis.height() - vis.const('sy')()(d) })
                        .attr('height', this.const('sy')())
                        .style('fill', 'steelblue')

                selBar.exit().transition()
                        .duration(1000)
                        .attr('y', this.height())
                        .remove()
            }
    	</textarea></p>
    	<p><input type="button" name="n3-ui_visSave" value="Save" id="n3-ui_visSave" onclick="saveVis();" /></p>
    </div>
        
    <div id="n3-ui_stage">
        
    </div>
    
    <div id="n3-ui_bottom_panel">
        <input type="button" name="n3-ui_startScene" value="New Scene" id="n3-ui_startScene" onclick="startScene();" />
        
        <input type="button" name="n3-ui_endScene" value="End Scene" id="n3-ui_endScene" onclick="endScene();" style="display: none;" />
        
        <div id="n3-ui_palette" style="display: none;">
            <a href="#" onclick="toggleShape(this, SHAPES.ELLIPSE);"><img src="imgs/draw-circle.png" src="Draw Circle" /></a>
            <!-- <a href="#" onclick="toggleShape(this, SHAPES.ELLIPSE);"><img src="imgs/draw-ellipse.png" src="Draw Ellipse" /></a> -->
            <a href="#" onclick="toggleShape(this, SHAPES.RECTANGLE);"><img src="imgs/draw-rect.png" src="Draw Rect" /></a>
            <a href="#" onclick="toggleShape(this, SHAPES.LINE);"><img src="imgs/draw-line.png" src="Draw Line" /></a>
        </div>
        
        <input type="button" name="n3-ui_export" value="Export Story" id="n3-ui_export" onclick="exportStory();" />
    </div>
    
    <div id="n3-ui_side_panel">
        
    </div>
    
    <div id="n3-ui_triggerDialog" title="Triggers">
    	<p>Please enter triggers for this member using n3 syntax.</p>
    	<p><textarea name="triggers" id="triggers"></textarea></p>
    	<p><input type="button" name="n3-ui_visSave" value="Save" id="n3-ui_visSave" onclick="saveTriggers();" /></p>
    </div>
    
    <div id="n3-ui_stylesDialog" title="Styles">
    	<p>The following styles are available for the selected annotation.</p>
    	
    	<p><span class="style_desc">Fill opacity and color:</span> <span id="fill_opacity"></span> <span id="fill_color"></span></p>
    	
    	<p><span class="style_desc">Border width and color:</span> <span id="stroke_width"></span> <span id="stroke_color"></span></p>
    </div>
    
    <div id="n3-ui_exportDialog" title="Export">
    	<p><textarea name="export" id="export"></textarea></p>
    </div>
</body>
</html>